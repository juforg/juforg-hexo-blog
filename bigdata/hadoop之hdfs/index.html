<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">










  <meta name="google-site-verification" content="jMHRiBfNOcZpLeHK0bJ1AaYU5A1z-0QXMbVc4yXgNfM">

















  

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.2/css/font-awesome.min.css">

<link rel="stylesheet" href="/css/main.css?v=7.0.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/appcityico.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/appcityico.png?v=7.0.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false,"dimmer":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: 'ZZE0EYQZDX',
      apiKey: 'f906b8260884e9894c6e3bc49c54ffe0',
      indexName: 'hexoblog',
      hits: {"per_page":10},
      labels: {"input_placeholder":"输入关键字","hits_empty":"没找到关于: ${query} 的内容","hits_stats":"找到 ${hits} 个陪陪结果 ，用时${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="What?  Hadoop 生态   来自于 Google 03 年发布 3 大论文， GFS、mapreduce、Bigtable ;Dougcutting 用 Java 实现) HDFS: Hadoop Distributed File System 分布式存储系统 http://hadoop.apache.org high-throughput 高吞吐  Hadoop Common Hado">
<meta name="keywords" content="大数据,ha,高可用,hadoop,hdfs">
<meta property="og:type" content="article">
<meta property="og:title" content="Hadoop实践之HDFS">
<meta property="og:url" content="http://blog.appcity.vip/bigdata/hadoop之hdfs/index.html">
<meta property="og:site_name" content="夕拾阁">
<meta property="og:description" content="What?  Hadoop 生态   来自于 Google 03 年发布 3 大论文， GFS、mapreduce、Bigtable ;Dougcutting 用 Java 实现) HDFS: Hadoop Distributed File System 分布式存储系统 http://hadoop.apache.org high-throughput 高吞吐  Hadoop Common Hado">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://wntc-1251220317.cossh.myqcloud.com/2018/11/6/1541470096112.png">
<meta property="og:image" content="http://wntc-1251220317.cossh.myqcloud.com/2018/11/7/1541557592882.png">
<meta property="og:image" content="http://wntc-1251220317.cossh.myqcloud.com/2018/11/6/1541476214134.png">
<meta property="og:image" content="http://wntc-1251220317.cossh.myqcloud.com/2018/11/16/1542368350532.png">
<meta property="og:image" content="http://wntc-1251220317.cossh.myqcloud.com/2018/11/16/1542368926884.png">
<meta property="og:image" content="http://wntc-1251220317.cossh.myqcloud.com/2018/11/6/1541475553101.png">
<meta property="og:image" content="http://wntc-1251220317.cossh.myqcloud.com/2018/11/16/1542372442143.png">
<meta property="og:image" content="http://wntc-1251220317.cossh.myqcloud.com/2018/11/6/1541491521598.png">
<meta property="og:image" content="http://wntc-1251220317.cossh.myqcloud.com/2018/11/6/1541493211406.png">
<meta property="og:image" content="http://wntc-1251220317.cossh.myqcloud.com/2018/11/16/1542372865117.png">
<meta property="og:image" content="http://oapwg4v13.bkt.clouddn.com/1474794671.png">
<meta property="og:image" content="http://oapwg4v13.bkt.clouddn.com/1480147113.png">
<meta property="og:image" content="http://oapwg4v13.bkt.clouddn.com/1474797386.png">
<meta property="og:image" content="http://oapwg4v13.bkt.clouddn.com/1474797522.png">
<meta property="og:updated_time" content="2020-02-05T14:47:18.909Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hadoop实践之HDFS">
<meta name="twitter:description" content="What?  Hadoop 生态   来自于 Google 03 年发布 3 大论文， GFS、mapreduce、Bigtable ;Dougcutting 用 Java 实现) HDFS: Hadoop Distributed File System 分布式存储系统 http://hadoop.apache.org high-throughput 高吞吐  Hadoop Common Hado">
<meta name="twitter:image" content="http://wntc-1251220317.cossh.myqcloud.com/2018/11/6/1541470096112.png">



  <link rel="alternate" href="/atom.xml" title="夕拾阁" type="application/atom+xml">




  <link rel="canonical" href="http://blog.appcity.vip/bigdata/hadoop之hdfs/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Hadoop实践之HDFS | 夕拾阁</title>
  




  <script async src="//www.googletagmanager.com/gtag/js?id=[object Object]"></script>
  <script>
    var host = window.location.hostname;
    if (host !== "localhost" || !true) {
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-81118574-1');
    }
  </script>



  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?63b060abb589ae3a3649732e9aaa9c59";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>







  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">夕拾阁</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <h1 class="site-subtitle" itemprop="description">努力程度决定了你能达到的下限</h1>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类<span class="badge">24</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档<span class="badge">55</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-doubanbooks">

    
    
    
      
    

    
      
    

    <a href="/books" rel="section"><i class="menu-item-icon fa fa-fw fa-list-ul"></i> <br>书单</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-knowledgegraph">

    
    
    
      
    

    
      
    

    <a href="/categories/mindmap/" rel="section"><i class="menu-item-icon fa fa-fw fa-joomla"></i> <br>知识图谱</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  
    <div class="reading-progress-bar"></div>
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.appcity.vip/bigdata/hadoop之hdfs/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Juforg">
      <meta itemprop="description" content="以大多数人的努力程度之低还轮不到拼天赋">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="夕拾阁">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">Hadoop实践之HDFS

              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-09-25 09:08:17" itemprop="dateCreated datePublished" datetime="2016-09-25T09:08:17+08:00">2016-09-25</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2020-02-05 22:47:18" itemprop="dateModified" datetime="2020-02-05T22:47:18+08:00">2020-02-05</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/bigdata/" itemprop="url" rel="index"><span itemprop="name">大数据</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/bigdata/hadoop之hdfs/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/bigdata/hadoop之hdfs/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="post-meta-item-icon">
            <i class="fa fa-eye"></i>
             阅读次数： 
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2>What?</h2>
<hr>
<h3>Hadoop 生态</h3>
<p><img src="http://wntc-1251220317.cossh.myqcloud.com/2018/11/6/1541470096112.png" alt="">
<img src="http://wntc-1251220317.cossh.myqcloud.com/2018/11/7/1541557592882.png" alt=""></p>
<p>来自于 Google 03 年发布 3 大论文， GFS、mapreduce、Bigtable ;Dougcutting 用 Java 实现)</p>
<h3>HDFS:</h3>
<p>Hadoop Distributed File System
分布式存储系统</p>
<p>http://hadoop.apache.org</p>
<p>high-throughput 高吞吐</p>
<ul>
<li>Hadoop Common</li>
<li>Hadoop Distributed File System (HDFS™)</li>
<li>Hadoop YARN</li>
<li>Hadoop MapReduce</li>
</ul>
<p><img src="http://wntc-1251220317.cossh.myqcloud.com/2018/11/6/1541476214134.png" alt=""></p>
<h4>组件</h4>
<ul>
<li>name node 主节点
<ul>
<li>接收客户端读写服务</li>
<li>接收datanode 汇报的block位置信息</li>
<li>保存metadate元信息（基于内存存储，不会和磁盘发生交换）
<ul>
<li>文件 owership(归属)和 permissions(权限)</li>
<li>文件大小 时间</li>
<li>Block 列表[偏移量]：即一个完整文件有哪些 block</li>
<li>metadata 存储到磁盘文件名为”fsimage”的镜像文件</li>
<li>Block 的位置信息不会保存到 fsimage</li>
<li>edits 记录对 metadata 的操作日志</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li>secondary name node
<ul>
<li>整理 fsimage和 edites 日志 得到最新fsimage
<ul>
<li>避免nn重启后重新汇集所有文件meta信息</li>
</ul>
</li>
<li>SNN执行合并时间和机制
<ul>
<li>根据配置文件设置的时间间隔 fs.checkpoint.period默认3600秒</li>
<li>根据配置文件设置 edits log 大小 fs.checkpoint.size 规定 edits 文件的最大值默认是 64MB
<img src="http://wntc-1251220317.cossh.myqcloud.com/2018/11/16/1542368350532.png" alt="">
<img src="http://wntc-1251220317.cossh.myqcloud.com/2018/11/16/1542368926884.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>data node 从节点
<ul>
<li>存储block</li>
<li>启动DN线程的时候会向NameNode汇报block位置信息</li>
<li>通过向NN发送心跳保持与其联系(3秒一次)，如果NN10分钟没有收到 DN 的心跳，则认为其已经 lost，并 copy 其上的 block 到其它 DN</li>
</ul>
</li>
</ul>
<h4>存储模型block</h4>
<ul>
<li>偏移量标记位置</li>
<li>块大小默认hadoop1.x 是64M，hadoop2.x是128M（物理暂用空间按实际文件大小不会浪费）</li>
<li>默认情况下每个block 都有2个副本共3个副本</li>
<li>副本数不大于节点数</li>
<li>存放策略</li>
</ul>
<h4>存储方式</h4>
<p><img src="http://wntc-1251220317.cossh.myqcloud.com/2018/11/6/1541475553101.png" alt=""></p>
<ul>
<li>
<p>按大小被切分成若干个 block ，存储到不同节点上</p>
</li>
<li>
<p>放置策略</p>
<ul>
<li>第一个副本:放置在上传文件的DN;如果是集群外提交，则随</li>
<li>第二个副本:放置在于第一个副本不同的机架的节点上。</li>
<li>第三个副本:与第二个副本相同机架的不同节点。</li>
<li>更多副本:随机节点
<img src="http://wntc-1251220317.cossh.myqcloud.com/2018/11/16/1542372442143.png" alt=""></li>
</ul>
</li>
</ul>
<h4>内含机制</h4>
<ul>
<li>心跳</li>
<li>负载均衡</li>
<li>多副本</li>
</ul>
<h2>Why?</h2>
<hr>
<h3>分布式</h3>
<ul>
<li>容错</li>
<li>突破单机性能</li>
<li>效率高</li>
<li>可扩展</li>
</ul>
<h3>优点</h3>
<ul>
<li>分布式的特性:
<ul>
<li>适合大数据处理:GB 、TB 、甚至 PB 级及以上的数据</li>
<li>百万规模以上的文件数量:10K+ 节点。</li>
<li>适合批处理:移动计算而非数据(MR),数据位置暴露给计算框架</li>
</ul>
</li>
<li>自身特性:
<ul>
<li>可构建在廉价机器上:</li>
<li>高可靠性:通过多副本提提高</li>
<li>高容错性:数据自动保存多个副本;副本丢失后，自动恢复,提供 了恢复机制</li>
</ul>
</li>
</ul>
<h3>缺点</h3>
<ul>
<li>低延迟高数据吞吐访问问题
<ul>
<li>比如不支持毫秒级</li>
<li>吞吐量大但有限制于其延迟</li>
</ul>
</li>
<li>小文件存取占用 NameNode 大量内存(寻道时间超过读取时间 (99%))</li>
<li>不支持文件修改:一个文件只能有一个写者(深入)</li>
</ul>
<h2>How?</h2>
<hr>
<h3>HDFS 读文件流程</h3>
<p><img src="http://wntc-1251220317.cossh.myqcloud.com/2018/11/6/1541491521598.png" alt=""></p>
<ul>
<li>通过拓扑网络寻找最近的节点</li>
</ul>
<ol>
<li>首先调用 FileSystem 对象的 open 方法，其实是一个 DistributedFileSystem 的实例。</li>
<li>DistributedFileSystem 通过 rpc 协议获得文件的第 一批 block 的 locations 地址，(同一个 block 按照重复数 会返回多个 locations，因为同一文件的 block 分布式存储 在不同节点上)，这些 locations 按照 hadoop 拓扑结构排 序，距离客户端近的排在前面(就近原则选择)。</li>
<li>前两步会返回一个 FSDataInputStream 对象，该对象 会被封装 DFSInputStream 对象，DFSInputStream 可以方便 的管理 datanode 和 namenode 数据流。客户端调用 read 方 法，DFSInputStream 最会找出离客户端最近的 datanode 并连接。</li>
<li>数据从 datanode 源源不断的流向客户端。 这些操作对客户端来说是透明的，客户端的角度看来只
是读一个持续不断的流。</li>
<li>如果第一批 block 都读完了,DFSInputStream 就会去namenode 拿下一批 block的locations，然后继续读，如 果所有的块都读完，这时就会关闭掉所有的流。如果在读数据的时候， DFSInputStream 和 datanode 的通讯发生异常，就会尝试正在读的 block 的排序第二近的 datanode,并且会记录哪个 datanode 发生错误，剩余的 blocks 读的时候就会直接跳过该 datanode。 DFSInputStream 也会检查 block 数据校验和，如果发现一个 坏的 block,就会先报告到 namenode 节点，然后 DFSInputStream 在其他的 datanode 上读该 block 的镜像。 该设计就是客户端直接连接 datanode 来检索数据并且 namenode 来负责为每一个 block 提供最优的 datanode， namenode 仅仅处理 block location 的请求，这些信息都加 载在 namenode 的内存中，hdfs 通过 datanode 集群可以承受 大量客户端的并发访问。</li>
</ol>
<h3>HDFS 写文件流程</h3>
<p><img src="http://wntc-1251220317.cossh.myqcloud.com/2018/11/6/1541493211406.png" alt=""></p>
<ol>
<li>客户端通过调用 DistributedFileSystem 的 create 方 法创建新文件。</li>
<li>DistributedFileSystem 通过 RPC 调用 namenode 去创 建一个没有 blocks 关联的新文件，创建前， namenode 会做 各种校验，比如文件是否存在，客户端有无权限去创建等。 如果校验通过， namenode 就会记录下新文件，否则就会抛 出IO异常。</li>
<li>前两步结束后，会返回 FSDataOutputStream 的对象， 与读文件的时候相似，FSDataOutputStream 被封装成 DFSOutputStream。
DFSOutputStream 可以协调 namenode 和 datanode。客户端 开始写数据到 DFSOutputStream，DFSOutputStream 会把数
据切成一个个小的 packet，然后排成队列 data quene。</li>
<li>DataStreamer 会去处理接受 data quene，它先询问 namenode 这个新的 block 最适合存储的在哪几个 datanode
里(比如重复数是3那么就找到3个最适合的 datanode)， 把他们排成一个管道pipeline 输出。DataStreamer 把packet按队列输出到管道的第一个 datanode 中，第一个datanode又把packet输出到第二个 datanode中，以此类推。</li>
<li>DFSOutputStream 还有一个对列叫 ack quene，也是 由 packet 组成等待 datanode 的收到响应，当 pipeline 中 的 datanode 都表示已经收到数据的时候，这时 ack quene 才会把对应的 packet 包移除掉。 如果在写的过程中某个 datanode 发生错误，会采取以下几步:
<ol>
<li>pipeline 被关闭掉;</li>
<li>为了防止防止丢包。ack quene 里的 packet 会同步 到 data quene 里;创建新的 pipeline 管道怼到其他正常 DN 上</li>
<li>剩下的部分被写到剩下的两个正常的 datanode 中;</li>
<li>namenode 找到另外的 datanode 去创建这个块的复 制。当然，这些操作对客户端来说是无感知的。</li>
</ol>
</li>
<li>客户端完成写数据后调用 close 方法关闭写入流。</li>
</ol>
<h3>深入 DFSOutputStream 内部原理</h3>
<p><img src="http://wntc-1251220317.cossh.myqcloud.com/2018/11/16/1542372865117.png" alt=""></p>
<h6>是否按照block list 顺序读取block 信息？</h6>
<p>多节点并行读，单节点串读？</p>
<h2>安装</h2>
<hr>
<p>http://hadoop.apache.org/docs/r2.5.2/hadoop-project-dist/hadoop-common/SingleCluster.html</p>
<h3>必备：</h3>
<ul>
<li>java</li>
<li>ssh</li>
</ul>
<h3>检查：</h3>
<ul>
<li>echo <code>JAVA_HOME</code></li>
<li>ssh免密钥设置参照我的<code>VMWare虚拟机笔记</code>中的配置</li>
<li>防火墙是否关闭<code>service iptables status</code></li>
<li>时间同步软件是否安装</li>
</ul>
<h3>下载</h3>
<p>http://www.apache.org/dyn/closer.cgi/hadoop/common/</p>
<p>下载至目录 /opt/soft</p>
<h3>解压</h3>
<p>tar zxvf hadoop-2.5.1_x64.tar.gz</p>
<h3>修改配置</h3>
<ul>
<li>
<p><code>cd /opt/soft/hadoop-2.5.1</code></p>
</li>
<li>
<p><code>vi etc/hadoop/hadoop-env.sh</code></p>
<ul>
<li><code>export JAVA_HOME=/opt/soft/jdk1.7.0_25</code>将jdk变量指向自己的jdk路径,保存退出</li>
</ul>
</li>
<li>
<p><code>mkdir data</code></p>
</li>
<li>
<p><code>vi etc/hadoop/core-site.xml</code>添加下列配置
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://sj-node1:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">value</span>&gt;</span>/opt/soft/hadoop-2.5.1/data<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p><code>vi ./etc/hadoop/hdfs-site.xml</code>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">value</span>&gt;</span>3<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.secondary.http-address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>sj-node2:50090<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.secondary.https-address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>sj-node2:50091<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>修改slaves<code>vi ./etc/hadoop/slaves</code>
<img src="http://oapwg4v13.bkt.clouddn.com/1474794671.png" alt=""></p>
</li>
<li>
<p>新建masters文件<code>vi ./etc/hadoop/masters</code>以sj-node2作为第二主机</p>
</li>
</ul>
<h3>将配置好的传到其它节点</h3>
<ul>
<li><code>[root@sj-node1 soft]# scp -r hadoop-2.5.1 sj-node2:/opt/soft/</code></li>
<li><code>[root@sj-node1 soft]# scp -r hadoop-2.5.1 sj-node3:/opt/soft/</code></li>
<li><code>[root@sj-node1 soft]# scp -r hadoop-2.5.1 sj-node4:/opt/soft/</code></li>
</ul>
<h3>格式化NN</h3>
<p><code>[root@sj-node1 hadoop-2.5.1]# bin/hdfs namenode -format</code>
只需在NN几点也就是sj-node1上执行，确认没有错误,data目录下有文件生成</p>
<h3>启动</h3>
<p><code>[root@sj-node1 hadoop-2.5.1]# sbin/start-dfs.sh</code>
注意检查启动的时候控制台有没有报错</p>
<h3>启动后检查访问web</h3>
<ul>
<li>命令行检查
<ul>
<li>
<p><code>hdfs haadmin -getServiceState nn1</code>
<code>hdfs haadmin -getServiceState nn2</code>
<img src="http://oapwg4v13.bkt.clouddn.com/1480147113.png" alt=""></p>
</li>
<li>
<p>NN主节点 http://192.168.199.101:50070/</p>
</li>
<li>
<p>SNN http://192.168.199.102:50090/status.html</p>
</li>
<li>
<p>目录访问http://192.168.199.101:50070/explorer.html#/</p>
</li>
</ul>
</li>
</ul>
<h2>命令测试</h2>
<ul>
<li>创建文件夹
<ul>
<li><code>bin/hadoop fs -mkdir /testdir</code>
<img src="http://oapwg4v13.bkt.clouddn.com/1474797386.png" alt=""></li>
</ul>
</li>
<li>上传文件
<ul>
<li><code>[root@sj-node1 hadoop-2.5.1]# bin/hadoop fs -put README.txt /testdir</code>
<img src="http://oapwg4v13.bkt.clouddn.com/1474797522.png" alt=""></li>
</ul>
</li>
</ul>

      
    </div>

    
      


    

    
    
    

    
      <div>
        <div id="wechat_subscriber" style="display: block; padding: 10px 0; margin: 20px auto; width: 100%; text-align: center;">
  <img id="wechat_subscriber_qcode" src="http://wntc-1251220317.cossh.myqcloud.com/2019/3/8/1552054329801.png" alt="Juforg wechat" style="width: 200px; max-width: 100%;">
  <div>欢迎您扫一扫上面的微信公众号，订阅我的博客！</div>
</div>

      </div>
    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/大数据/" rel="tag"># 大数据</a>
          
            <a href="/tags/ha/" rel="tag"># ha</a>
          
            <a href="/tags/高可用/" rel="tag"># 高可用</a>
          
            <a href="/tags/hadoop/" rel="tag"># hadoop</a>
          
            <a href="/tags/hdfs/" rel="tag"># hdfs</a>
          
        </div>
      

      
      
        <div class="post-widgets">
        

        

        
          
          <div class="social_share">
            
              <div>
                
  <div class="bdsharebuttonbox">
    <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
    <a href="#" class="bds_douban" data-cmd="douban" title="分享到豆瓣网"></a>
    <a href="#" class="bds_sqq" data-cmd="sqq" title="分享到QQ好友"></a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
    <a href="#" class="bds_tieba" data-cmd="tieba" title="分享到百度贴吧"></a>
    <a href="#" class="bds_twi" data-cmd="twi" title="分享到Twitter"></a>
    <a href="#" class="bds_fbook" data-cmd="fbook" title="分享到Facebook"></a>
    <a href="#" class="bds_more" data-cmd="more"></a>
    <a class="bds_count" data-cmd="count"></a>
  </div>
  <script>
    window._bd_share_config = {
      "common": {
        "bdText": "",
        "bdMini": "2",
        "bdMiniList": false,
        "bdPic": ""
      },
      "share": {
        "bdSize": "16",
        "bdStyle": "0"
      },
      "image": {
        "viewList": ["tsina", "douban", "sqq", "qzone", "weixin", "twi", "fbook"],
        "viewText": "分享到：",
        "viewSize": "16"
      }
    }
  </script>

<script>
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

              </div>
            
            
          </div>
        
        </div>
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/bigdata/Zookeeper实践/" rel="next" title="Zookeeper实践">
                <i class="fa fa-chevron-left"></i> Zookeeper实践
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/bigdata/Hadoop之hdfs进阶/" rel="prev" title="Hadoop2实践之HDFS进阶篇-高可用">
                Hadoop2实践之HDFS进阶篇-高可用 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="Juforg">
            
              <p class="site-author-name" itemprop="name">Juforg</p>
              <p class="site-description motion-element" itemprop="description">以大多数人的努力程度之低还轮不到拼天赋</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">55</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">12</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">57</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/juforg" title="GitHub &rarr; https://github.com/juforg" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:juforg@sina.com" title="E-Mail &rarr; mailto:juforg@sina.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#null"><span class="nav-number">1.</span> <span class="nav-text">What?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#null"><span class="nav-number">1.1.</span> <span class="nav-text">Hadoop 生态</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#null"><span class="nav-number">1.2.</span> <span class="nav-text">HDFS:</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#null"><span class="nav-number">1.2.1.</span> <span class="nav-text">组件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#null"><span class="nav-number">1.2.2.</span> <span class="nav-text">存储模型block</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#null"><span class="nav-number">1.2.3.</span> <span class="nav-text">存储方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#null"><span class="nav-number">1.2.4.</span> <span class="nav-text">内含机制</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#null"><span class="nav-number">2.</span> <span class="nav-text">Why?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#null"><span class="nav-number">2.1.</span> <span class="nav-text">分布式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#null"><span class="nav-number">2.2.</span> <span class="nav-text">优点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#null"><span class="nav-number">2.3.</span> <span class="nav-text">缺点</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#null"><span class="nav-number">3.</span> <span class="nav-text">How?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#null"><span class="nav-number">3.1.</span> <span class="nav-text">HDFS 读文件流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#null"><span class="nav-number">3.2.</span> <span class="nav-text">HDFS 写文件流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#null"><span class="nav-number">3.3.</span> <span class="nav-text">深入 DFSOutputStream 内部原理</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#null"><span class="nav-number">3.3.0.0.1.</span> <span class="nav-text">是否按照block list 顺序读取block 信息？</span></a></li></ol></li></ol></li></ol><li class="nav-item nav-level-2"><a class="nav-link" href="#null"><span class="nav-number">4.</span> <span class="nav-text">安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#null"><span class="nav-number">4.1.</span> <span class="nav-text">必备：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#null"><span class="nav-number">4.2.</span> <span class="nav-text">检查：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#null"><span class="nav-number">4.3.</span> <span class="nav-text">下载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#null"><span class="nav-number">4.4.</span> <span class="nav-text">解压</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#null"><span class="nav-number">4.5.</span> <span class="nav-text">修改配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#null"><span class="nav-number">4.6.</span> <span class="nav-text">将配置好的传到其它节点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#null"><span class="nav-number">4.7.</span> <span class="nav-text">格式化NN</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#null"><span class="nav-number">4.8.</span> <span class="nav-text">启动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#null"><span class="nav-number">4.9.</span> <span class="nav-text">启动后检查访问web</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#null"><span class="nav-number">5.</span> <span class="nav-text">命令测试</span></a></li></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">  <a href="http://www.miitbeian.gov.cn" rel="noopener" target="_blank">沪ICP备16050188号-1 </a>&copy; 2016 – <span itemprop="copyrightYear">2021</span>
  <span class="with-love" id="animate">
    <i class="fa fa-copyright"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Juforg</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.0.1</div>




  <script src="https://cdn.bootcdn.net/ajax/libs/mermaid/8.0.0/mermaid.min.js"></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize("");
    }
  </script>


        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="总访客量">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="总访问量">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>







  <div style="display: none;">
    <script src="//s95.cnzz.com/z_stat.php?id=1276674346&web_id=1276674346"></script>
  </div>



        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
























  



  
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

  
  <script src="//cdnjs.cloudflare.com/ajax/libs/velocity/1.2.1/velocity.min.js"></script>

  
  <script src="//cdnjs.cloudflare.com/ajax/libs/velocity/1.2.1/velocity.ui.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-reading-progress@1/reading_progress.min.js"></script>


  


  <script src="/js/src/utils.js?v=7.0.1"></script>

  <script src="/js/src/motion.js?v=7.0.1"></script>

  <script src="/js/src/kity.min.js?v=7.0.1"></script>

  <script src="/js/src/kityminder.core.min.js?v=7.0.1"></script>

  <script src="/js/src/mindmap.js?v=7.0.1"></script>



  
  


  <script src="/js/src/affix.js?v=7.0.1"></script>

  <script src="/js/src/schemes/pisces.js?v=7.0.1"></script>




  
  <script src="/js/src/scrollspy.js?v=7.0.1"></script>
<script src="/js/src/post-details.js?v=7.0.1"></script>



  


  <script src="/js/src/bootstrap.js?v=7.0.1"></script>


  
  
  

  

<script src="//cdn.jsdelivr.net/npm/leancloud-storage@3/dist/av-min.js"></script>



  

<script src="//cdnjs.cloudflare.com/ajax/libs/valine/1.3.4/Valine.min.js"></script>

<script>
  var GUEST = ['nick', 'mail', 'link'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#comments',
    verify: false,
    notify: true,
    appId: 'LVc4wMV4nqOSxd3vboYEuxty-gzGzoHsz',
    appKey: 'AB11iu8RjTGwnLmI6D7THqDC',
    placeholder: 'Just go go',
    avatar: 'mm',
    meta: guest,
    pageSize: '10' || 10,
    visitor: false
  });
</script>




  


  



  
  
  
    
  
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.min.css">

  
  
    
  
  <script src="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.js"></script>
  

  <script src="/js/src/algolia-search.js?v=7.0.1"></script>



  

  

  

  

  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>


  

  

  

  

  

  

  

  

</body>
</html>
